<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>THE DAYLUGE</title>

<!-- Vintage typewriter font -->
<link href="https://fonts.googleapis.com/css2?family=Special+Elite&display=swap" rel="stylesheet">

<style>
  :root{
    /* Link color palette (darker blue/green) */
    --red:#cc0000; 
    --orange:#ff6600; 
    --green:#005f00;      /* darker green */
    --lime:#228b22; 
    --blue:#003366;       /* darker blue */
    --light-blue:#000066; 
    --indigo:#4b0082; 
    --violet:#6600cc; 
    --pink:#ff3399;

    /* Neutral newspaper tones */
    --ink:#111; 
    --rule:#bfbfbf;
    --maxw:1400px;

    --panel-bg:#ffffffee;
    --panel-border:#cfcfcf;
  }

  /* Color classes for links */
  .c-red{color:var(--red)}
  .c-orange{color:var(--orange)}
  .c-green{color:var(--green)}
  .c-lime-green{color:var(--lime)}
  .c-blue{color:var(--blue)}
  .c-light-blue{color:var(--light-blue)}
  .c-indigo{color:var(--indigo)}
  .c-violet{color:var(--violet)}
  .c-pink{color:var(--pink)}
  .c-purple{color:var(--violet)}
  .c-black{color:#000}

  *{box-sizing:border-box;margin:0;padding:0}
  html, body {height:100%}

  /* Simple white background */
  body{
    font-family:'Special Elite', monospace;
    color:var(--ink);
    line-height:1.5;
    background:#fff;
    padding:20px;
    position:relative;
  }

  .wrap{max-width:var(--maxw); margin:0 auto; position:relative; z-index:1;}

  header{text-align:center; margin-bottom:10px;}
  h1{text-transform:uppercase; letter-spacing:.5px; font-size:36px; cursor:pointer;}

  nav{
    text-align:center; margin:8px 0 18px; padding-bottom:10px;
    border-bottom:1px dashed var(--rule);
  }
  nav a{color:#333; text-decoration:none; font-weight:bold; margin:0 12px;}
  nav a:hover{text-decoration:underline;}

  /* 3-column layout on desktop; 2 on tablet; 1 on mobile */
  .grid{
    display:grid;
    grid-template-columns:repeat(3,1fr);
    gap:10px 18px;
    margin-top:10px;
  }
  @media(max-width:900px){.grid{grid-template-columns:repeat(2,1fr);}}
  @media(max-width:600px){.grid{grid-template-columns:1fr;} h1{font-size:28px;}}

  .link a{
    display:block;
    font-size:20px;
    font-weight:bold;
    text-decoration:none;
    word-break:break-word;
    padding:2px 0;
    text-shadow:0 .2px 0 rgba(0,0,0,0.35);
  }
  .link a:hover{text-decoration:underline;}

  /* Admin Panel */
  .admin-panel{
    display:none;
    position:sticky; top:8px;
    background:var(--panel-bg);
    border:1px solid var(--panel-border);
    border-radius:8px;
    padding:12px;
    margin:10px auto 16px;
    max-width:720px;
    box-shadow:0 6px 18px rgba(0,0,0,0.08);
  }
  .admin-panel.show{display:block;}
  .admin-row{display:flex; flex-wrap:wrap; gap:8px; margin-top:8px;}
  .admin-panel input[type="text"],
  .admin-panel input[type="url"],
  .admin-panel select{
    flex:1 1 200px;
    font-family:inherit; font-size:16px;
    padding:8px 10px; border:1px solid #d4d4d4; border-radius:6px; background:#fff;
  }
  .admin-panel button{
    font-family:inherit; font-weight:bold; font-size:15px;
    padding:8px 12px; border:1px solid #c8c8c8; border-radius:6px; background:#f5f5f5;
    cursor:pointer;
  }
  .admin-panel button:hover{background:#eee;}
  .admin-stats{font-size:12px; color:#444; margin-top:6px;}
  .admin-help{font-size:12px; color:#666; margin-top:6px;}

  /* Archive modal */
  .archive-link{font-size:12px; color:#333; text-decoration:underline; cursor:pointer; margin-left:8px;}
  .archive-modal{
    display:none; position:fixed; inset:0; z-index:50; background:rgba(0,0,0,0.4);
    align-items:center; justify-content:center; padding:16px;
  }
  .archive-modal.show{display:flex;}
  .archive-card{
    background:#fff; border-radius:10px; padding:16px; max-width:800px; width:100%;
    max-height:80vh; overflow:auto; border:1px solid #ddd; box-shadow:0 10px 26px rgba(0,0,0,0.25);
  }
  .archive-card h3{margin-bottom:10px;}
  .archive-list .link a{font-size:16px;}
  .archive-close{float:right; cursor:pointer; font-weight:bold;}
</style>
</head>
<body>
<div class="wrap">
  <header>
    <h1 id="titleTap">THE DAYLUGE</h1>
  </header>
  <nav><a href="/">Home</a> <a id="openArchive" class="archive-link">Archive</a></nav>

  <!-- Admin Panel (PIN-protected) -->
  <div id="adminPanel" class="admin-panel" aria-hidden="true">
    <strong>Add a new link</strong>
    <div class="admin-row">
      <input id="linkTitle" type="text" placeholder="Link title" autocomplete="off" />
      <input id="linkUrl"   type="url"  placeholder="https://example.com" inputmode="url" />
      <select id="linkColor">
        <option value="c-blue">Blue</option>
        <option value="c-green">Green</option>
        <option value="c-red">Red</option>
        <option value="c-orange">Orange</option>
        <option value="c-pink">Pink</option>
        <option value="c-indigo">Indigo</option>
        <option value="c-violet">Violet</option>
        <option value="c-light-blue">Light Blue</option>
        <option value="c-lime-green">Lime Green</option>
        <option value="c-black">Black</option>
        <option value="c-purple">Purple</option>
      </select>
      <button id="addBtn">+ Add Link</button>
    </div>
    <div class="admin-row">
      <button id="exportBtn">Export All (JSON)</button>
      <button id="clearBtn" title="Clears everything (including archive)">Clear All</button>
      <button id="lockBtn" title="Re-lock admin on this device">Lock Admin</button>
    </div>
    <div class="admin-stats">
      <span id="statActive"></span> • <span id="statArchive"></span>
    </div>
  </div>

  <!-- Archive Modal -->
  <div id="archiveModal" class="archive-modal" aria-hidden="true">
    <div class="archive-card">
      <span id="closeArchive" class="archive-close">✕</span>
      <h3>Archive</h3>
      <div id="archiveList" class="archive-list"></div>
    </div>
  </div>

  <!-- Grid of links -->
  <div id="grid" class="grid"></div>
</div>

<script>
/* ====== CONFIG: Admin PIN & flags ====== */
const ADMIN_PIN = "2134";
const ADMIN_FLAG_KEY = "dayluge_admin_ok_v1";

/* ====== DATA / STORAGE ====== */
const STORAGE_KEY = 'dayluge_store_v1';
const MAX_ACTIVE  = 48;

/* Your curated starting links */
const curatedInitial = [
  {t:"The Best Performing Fund in Modern History", u:"https://www.visualcapitalist.com/growth-of-100-invested-in-jim-simons-medallion-fund/", c:"c-green"},
  {t:"The Pyramid Power Plant Theory", u:"https://www.youtube.com/shorts/0Phz6wnq_GU", c:"c-pink"},
  {t:"\"Kryptos\" - The Unsolved Secret Code at CIA Headquarters", u:"https://www.history.com/articles/kryptos-cia-sculpture-mystery-code", c:"c-purple"},

  {t:"The Vegas Shooting Is A Layered Onion of \"Max Conspiracy\"", u:"https://youtu.be/HdllGyweF7c?si=qX95ftQDHqHYKE_j", c:"c-pink"},
  {t:"The \"Classic Part\" Little Boy Has the Right Attitude", u:"https://www.instagram.com/reel/C0XBYjXRPGY/?igsh=MWVxNG56cDF3a2Jzcg%3D%3D", c:"c-light-blue"},
  {t:"This Teacher Loves His Students", u:"https://www.instagram.com/reel/DLflv5zOUGA/?igsh=MTUwdDV0M3VobmFtYw%3D%3D", c:"c-light-blue"},

  {t:"Diddy's Arrest Is Part of Something Bigger", u:"https://example.com", c:"c-red"},
  {t:"Systemic Corruption Doesn't Give A Chance For Peace In Ukraine", u:"https://www.zerohedge.com/geopolitical/systemic-corruption-doesnt-give-chance-peace-ukraine", c:"c-red"},
  {t:"1910: The Year the Modern World Lost Its Mind", u:"https://www.derekthompson.org/p/1910-the-year-the-modern-world-lost", c:"c-purple"},

  {t:"US Federal Debt Surging At +$21 Billion Per Day", u:"https://x.com/KobeissiLetter/status/1959636646925852986", c:"c-green"},
  {t:"Ghislaine Maxwell: Trump 'Was Never Inappropriate'", u:"https://www.zerohedge.com/political/ghislaine-maxwell-says-father-was-intelligence-asset-trump-was-never-inappropriate-doj", c:"c-red"},
  {t:"All-Time High in Cocaine Production", u:"https://geopoliticalfutures.com/an-all-time-high-in-cocaine-production/", c:"c-red"},

  {t:"Going Full Bud Light", u:"https://thefederalist.com/2025/08/21/cracker-barrel-is-dead-and-its-stupid-woke-ceo-killed-it-with-gay-nonsense/", c:"c-green"},
  {t:"Gates, Ballmer and Pals Rocking Out HARD to Windows 95", u:"https://x.com/engineers_feed/status/1959628877711487203", c:"c-violet"},
  {t:"1954: Bikini Atoll Nuclear Test 1000x Stronger Than Hiroshima", u:"https://x.com/Rainmaker1973/status/1959655344709173469", c:"c-purple"},

  {t:"They Found Giants In A Cave", u:"https://www.youtube.com/watch?v=x9cVcGQNxBw", c:"c-pink"},
  {t:"10 Must-Watch War Shows, Ranked", u:"https://collider.com/best-war-shows-must-watch-ranked/", c:"c-blue"},
  {t:"Credit Card Delinquencies Surging", u:"https://x.com/onechancefreedm/status/1959315977830903826", c:"c-green"},

  {t:"Israel Targets Yemen's Capital With Massive Strikes", u:"https://www.zerohedge.com/geopolitical/watch-israel-targets-yemens-capital-massive-strikes-near-presidential-complex-missile", c:"c-red"},
  {t:"Watch Global Local TV Online", u:"https://tv.garden/", c:"c-blue"},
  {t:"7 Brilliant Acts of Psychological Warfare in History", u:"https://www.history.com/articles/brilliant-psyops-psychological-warfare", c:"c-purple"},

  {t:"Dave Smith: \"I Was A Militant Atheist\"", u:"https://www.youtube.com/watch?v=F4M1MlBZyI0", c:"c-pink"},
  {t:"The Smithsonian Has Jumped the Shark", u:"https://www.washingtonexaminer.com/opinion/editorials/3777258/smithsonian-long-overdue-for-housecleaning/", c:"c-orange"},
  {t:"How Did Moscow Become Europe's Biggest City?", u:"https://unchartedterritories.tomaspueyo.com/p/why-is-moscow-so-weird", c:"c-purple"},

  {t:"Cost of Attending an NFL Game +40% in 10 Years", u:"https://www.zerohedge.com/markets/cost-attending-nfl-game-has-risen-40-last-10-years", c:"c-violet"},
  {t:"'Holy Grail' Jordan–Bryant Card Sells for $12.9M", u:"https://www.espn.com/nba/story/_/id/46061949/holy-grail-jordan-bryant-sports-card-sells-record-129m", c:"c-indigo"},
  {t:"Which New NFL Coaches Are in the Best Position to Win?", u:"https://www.espn.com/nfl/story/_/id/46039656/nfl-new-head-coaches-outlooks-predictions-2025", c:"c-orange"},

  {t:"Six Tips from the Middle Ages on How to Beat the Summer Heat", u:"https://theconversation.com/six-tips-from-the-middle-ages-on-how-to-beat-the-summer-heat-263290", c:"c-blue"},
  {t:"Twilight of the House of Lords", u:"https://crisismagazine.com/opinion/christendoms-last-gasp-the-twilight-of-the-house-of-lords?utm_source=Crisis+Magazine&utm_campaign=fb27a8ddfa-Crisis_DAILYRSS_EMAIL&utm_medium=email&utm_term=0_a5a13625fd-fb27a8ddfa-21139129&mc_cid=fb27a8ddfa&mc_eid=f42f0d2b82", c:"c-pink"},
  {t:"Gold International Reserves are SURGING", u:"https://x.com/GlobalMktObserv/status/1959654438332670436", c:"c-green"}
];

/* Load or seed store */
function loadStore(){
  try{
    const raw = localStorage.getItem(STORAGE_KEY);
    if(!raw) return {active:[...curatedInitial], archive:[]};
    const parsed = JSON.parse(raw);
    if(!Array.isArray(parsed.active)) parsed.active = [];
    if(!Array.isArray(parsed.archive)) parsed.archive = [];
    /* If active got wiped somehow, reseed with curated links */
    if(parsed.active.length === 0){
      parsed.active = [...curatedInitial];
    }
    return parsed;
  }catch(e){
    return {active:[...curatedInitial], archive:[]};
  }
}
function saveStore(){ localStorage.setItem(STORAGE_KEY, JSON.stringify(store)); }

let store = loadStore();

/* ====== RENDERING ====== */
const gridEl = document.getElementById('grid');
const statActive = document.getElementById('statActive');
const statArchive = document.getElementById('statArchive');
const archiveModal = document.getElementById('archiveModal');
const archiveList = document.getElementById('archiveList');

function escapeHTML(s){ return String(s).replace(/[&<>"']/g, m => ({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;'}[m])); }

function renderGrid(){
  gridEl.innerHTML = store.active.map(item => `
    <div class="link"><a class="${item.c || 'c-black'}" href="${item.u}" target="_blank" rel="noopener">${escapeHTML(item.t)}</a></div>
  `).join('');
  if(statActive) statActive.textContent = `Active: ${store.active.length}/${MAX_ACTIVE}`;
  if(statArchive) statArchive.textContent = `Archived: ${store.archive.length}`;
}
function renderArchive(){
  if(!store.archive.length){
    archiveList.innerHTML = '<p style="color:#555;">Archive is empty.</p>'; return;
  }
  archiveList.innerHTML = store.archive.map(item => `
    <div class="link"><a class="${item.c || 'c-black'}" href="${item.u}" target="_blank" rel="noopener">${escapeHTML(item.t)}</a></div>
  `).join('');
}

/* ====== ADMIN PANEL (PIN-locked) ====== */
const adminPanel = document.getElementById('adminPanel');
const addBtn = document.getElementById('addBtn');
const exportBtn = document.getElementById('exportBtn');
const clearBtn = document.getElementById('clearBtn');
const lockBtn = document.getElementById('lockBtn');
const titleTap = document.getElementById('titleTap');

const inputTitle = document.getElementById('linkTitle');
const inputUrl = document.getElementById('linkUrl');
const inputColor = document.getElementById('linkColor');

function isAdminUnlocked(){
  return localStorage.getItem(ADMIN_FLAG_KEY) === '1';
}
function lockAdmin(){
  localStorage.removeItem(ADMIN_FLAG_KEY);
  adminPanel.classList.remove('show');
  adminPanel.setAttribute('aria-hidden','true');
  alert('Admin is now locked on this device.');
}
function unlockAdminWithPin(){
  const pin = prompt('Enter admin PIN:');
  if(pin === null) return false;
  if(pin === ADMIN_PIN){
    localStorage.setItem(ADMIN_FLAG_KEY,'1');
    return true;
  } else {
    alert('Incorrect PIN');
    return false;
  }
}
function toggleAdmin(){
  if(!isAdminUnlocked()){
    if(!unlockAdminWithPin()) return;
  }
  const show = !adminPanel.classList.contains('show');
  adminPanel.classList.toggle('show', show);
  adminPanel.setAttribute('aria-hidden', show ? 'false' : 'true');
}

/* Triple-tap to toggle (with PIN) */
let tapCount = 0, tapTimer = null;
titleTap.addEventListener('click', () => {
  tapCount++;
  if(!tapTimer){
    tapTimer = setTimeout(() => { tapCount = 0; tapTimer = null; }, 600);
  }
  if(tapCount >= 3){
    toggleAdmin();
    tapCount = 0; clearTimeout(tapTimer); tapTimer = null;
  }
});

/* ?admin=1 tries to open admin (will still require PIN if locked) */
if (new URLSearchParams(location.search).get('admin') === '1'){
  toggleAdmin();
}

/* Admin actions */
if(addBtn){
  addBtn.addEventListener('click', () => {
    if(!isAdminUnlocked()){ alert('Admin locked. Triple-tap title and enter PIN.'); return; }
    const t = inputTitle.value.trim();
    const u = inputUrl.value.trim();
    const c = inputColor.value || 'c-black';
    if(!t || !u){ alert('Please enter both Title and URL.'); return; }
    if(!/^https?:\/\//i.test(u)){ alert('URL should start with http:// or https://'); return; }

    store.active.unshift({t,u,c,ts:Date.now()});
    while(store.active.length > MAX_ACTIVE){
      const moved = store.active.pop();
      store.archive.unshift(moved);
    }
    saveStore();
    inputTitle.value = ''; inputUrl.value = '';
    renderGrid();
  });
}
if(exportBtn){
  exportBtn.addEventListener('click', () => {
    if(!isAdminUnlocked()){ alert('Admin locked. Triple-tap title and enter PIN.'); return; }
    const blob = new Blob([JSON.stringify(store, null, 2)], {type:'application/json'});
    const url = URL.createObjectURL(blob);
    const a = document.createElement('a'); a.href = url; a.download = 'dayluge-export.json'; a.click();
    URL.revokeObjectURL(url);
  });
}
if(clearBtn){
  clearBtn.addEventListener('click', () => {
    if(!isAdminUnlocked()){ alert('Admin locked. Triple-tap title and enter PIN.'); return; }
    if(confirm('Clear ALL active links and archive? This cannot be undone.')){
      store = {active:[...curatedInitial], archive:[]};  /* reseed with curated so page isn't blank */
      saveStore(); renderGrid();
    }
  });
}
if(lockBtn){
  lockBtn.addEventListener('click', () => {
    if(!isAdminUnlocked()){ alert('Admin is already locked.'); return; }
    lockAdmin();
  });
}

/* Archive modal */
document.getElementById('openArchive').addEventListener('click', (e) => {
  e.preventDefault(); renderArchive();
  archiveModal.classList.add('show'); archiveModal.setAttribute('aria-hidden','false');
});
document.getElementById('closeArchive').addEventListener('click', () => {
  archiveModal.classList.remove('show'); archiveModal.setAttribute('aria-hidden','true');
});
archiveModal.addEventListener('click', (e) => {
  if (e.target === archiveModal){
    archiveModal.classList.remove('show');
    archiveModal.setAttribute('aria-hidden','true');
  }
});

/* Init render */
renderGrid();
</script>
</body>
</html>
