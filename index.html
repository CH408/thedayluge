<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>THE DAYLUGE</title>
<style>
  :root{
    --red:#cc0000; --orange:#ff6600; --green:#009900; --lime:#32cd32;
    --blue:#3388cc; --light-blue:#000080; --indigo:#4b0082; --violet:#6600cc; --pink:#ff3399;
    --ink:#111827; --muted:#6b7280; --bg:#f3f4f6; --paper:#ffffff; --rule:#e5e7eb;
    --maxw: 1400px;
  }

  /* Color classes */
  .c-red{color:var(--red)} .c-orange{color:var(--orange)} .c-green{color:var(--green)}
  .c-lime-green{color:var(--lime)} .c-blue{color:var(--blue)} .c-light-blue{color:var(--light-blue)}
  .c-indigo{color:var(--indigo)} .c-violet{color:var(--violet)} .c-pink{color:var(--pink)}
  .c-purple{color:var(--violet)} .c-black{color:#000}

  *{box-sizing:border-box}
  body{
    margin:0; background:#e0e0e0; color:#000;
    font-family:"Courier New", monospace; line-height:1.4;
  }
  .wrap{max-width:var(--maxw); margin:0 auto; padding:20px}
  header{ text-align:center; margin-bottom:10px }
  h1{ margin:0; font-size:36px; letter-spacing:1px }

  nav{ text-align:center; margin:6px 0 18px; padding-bottom:10px; border-bottom:1px solid var(--rule) }
  nav a{ color:#333; text-decoration:none; font-weight:bold; margin:0 12px }
  nav a:hover{ text-decoration:underline }

  /* Toolbar */
  .bar{
    display:flex; gap:8px; align-items:center; justify-content:space-between;
    flex-wrap:wrap; margin-bottom:14px;
  }
  .left,.right{display:flex; gap:6px; align-items:center; flex-wrap:wrap}
  input[type="text"], select{ border:1px solid var(--rule); border-radius:6px; padding:8px 10px; background:#fff; }
  button{
    border:1px solid var(--rule); border-radius:6px; padding:8px 12px; background:#fff; cursor:pointer;
    font-weight:bold;
  }
  button:hover{ background:#f4f4f4 }
  .meter{ font-size:12px; color:var(--muted) }

  /* Chronological grid (row-wise) */
  .grid{
    display:grid;
    grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
    gap:16px;
  }
  .link{
    background:var(--paper); border:1px solid var(--rule); border-radius:8px; padding:10px 12px;
    font-weight:bold; font-size:18px;
  }
  .link a{ color:inherit; text-decoration:none; display:block; word-break:break-word }
  .link a:hover{ text-decoration:underline }
  .empty{ color:#9aa0a6; text-align:center; padding:40px 0 }

  @media (max-width:640px){
    h1{ font-size:28px }
  }
</style>
</head>
<body>
<div class="wrap">
  <header><h1>THE DAYLUGE</h1></header>
  <nav><a href="/">Home</a> <a href="#">Archive</a></nav>

  <!-- Minimal add/toggle/export bar -->
  <div class="bar">
    <div class="left">
      <input id="titleInput" type="text" placeholder="Title" />
      <input id="urlInput"   type="text" placeholder="URL" />
      <select id="colorInput" title="color">
        <option value="c-black">(black)</option>
        <option value="c-red">red</option>
        <option value="c-orange">orange</option>
        <option value="c-green">green</option>
        <option value="c-lime-green">lime</option>
        <option value="c-blue">blue</option>
        <option value="c-light-blue">light-blue</option>
        <option value="c-indigo">indigo</option>
        <option value="c-violet">violet</option>
        <option value="c-pink">pink</option>
        <option value="c-purple">purple</option>
      </select>
      <button id="addBtn">Add</button>
    </div>
    <div class="right">
      <button id="toggleBtn">View Archive</button>
      <button id="exportActiveBtn" title="Export active JSON">Export Active</button>
      <button id="exportArchiveBtn" title="Export archive JSON">Export Archive</button>
      <span class="meter" id="counts"></span>
    </div>
  </div>

  <div class="grid" id="feed"></div>
  <div id="emptyMsg" class="empty" style="display:none">No links yet.</div>
</div>

<script>
/* -------------------- EXACT CURATED LINKS (seed) -------------------- */
/* Newest first after sorting by timestamp; colors preserved exactly.  */
const SEED_ACTIVE = [
  /* Column 1 (Longform etc.) */
  { url:"https://www.history.com/articles/brilliant-psyops-psychological-warfare",
    title:"7 Brilliant Acts of Psychological Warfare in History", color:"c-purple",
    timestamp:"2025-08-24T00:00:00.000Z" },
  { url:"https://www.derekthompson.org/p/1910-the-year-the-modern-world-lost",
    title:"1910: The Year the Modern World Lost Its Mind", color:"c-blue",
    timestamp:"2025-08-23T00:00:00.000Z" },
  { url:"https://www.history.com/articles/kryptos-cia-sculpture-mystery-code",
    title:"\"Kryptos\" - The Unsolved Secret Code at CIA Headquarters", color:"c-red",
    timestamp:"2025-08-22T00:00:00.000Z" },
  { url:"https://collider.com/best-war-shows-must-watch-ranked/",
    title:"10 Must-Watch War Shows, Ranked", color:"c-orange",
    timestamp:"2025-08-20T00:00:00.000Z" },
  { url:"https://unchartedterritories.tomaspueyo.com/p/why-is-moscow-so-weird",
    title:"How Did Moscow Become Europe's Biggest City?", color:"c-green",
    timestamp:"2025-08-20T00:00:00.000Z" },
  { url:"https://theconversation.com/six-tips-from-the-middle-ages-on-how-to-beat-the-summer-heat-263290",
    title:"Six Tips from the Middle Ages on How to Beat the Summer Heat", color:"c-blue",
    timestamp:"2025-08-24T00:00:00.000Z" },
  { url:"https://crisismagazine.com/opinion/christendoms-last-gasp-the-twilight-of-the-house-of-lords?utm_source=Crisis+Magazine&utm_campaign=fb27a8ddfa-Crisis_DAILYRSS_EMAIL&utm_medium=email&utm_term=0_a5a13625fd-fb27a8ddfa-21139129&mc_cid=fb27a8ddfa&mc_eid=f42f0d2b82",
    title:"Twilight of the House of Lords", color:"c-pink",
    timestamp:"2025-08-22T00:00:00.000Z" },
  { url:"https://x.com/Rainmaker1973/status/1959655344709173469",
    title:"1954: Bikini Atoll Nuclear Test 1000x Stronger Than Hiroshima", color:"c-orange",
    timestamp:"2025-08-19T00:00:00.000Z" },
  { url:"https://www.youtube.com/watch?v=F4M1MlBZyI0",
    title:"Dave Smith: \"I Was A Militant Atheist\"", color:"c-pink",
    timestamp:"2025-08-17T00:00:00.000Z" },
  { url:"https://tv.garden/",
    title:"Watch Global Local TV Online", color:"c-blue",
    timestamp:"2025-08-21T00:00:00.000Z" },

  /* Column 2 (News/Politics/Econ) */
  { url:"https://www.zerohedge.com/political/ghislaine-maxwell-says-father-was-intelligence-asset-trump-was-never-inappropriate-doj",
    title:"Ghislaine Maxwell: Trump 'Was Never Inappropriate'", color:"c-red",
    timestamp:"2025-08-24T00:00:00.000Z" },
  { url:"https://x.com/onechancefreedm/status/1959315977830903826",
    title:"Credit Card Delinquencies Surging", color:"c-green",
    timestamp:"2025-08-23T00:00:00.000Z" },
  { url:"https://geopoliticalfutures.com/an-all-time-high-in-cocaine-production/",
    title:"All-Time High in Cocaine Production", color:"c-blue",
    timestamp:"2025-08-21T00:00:00.000Z" },
  { url:"https://x.com/GlobalMktObserv/status/1959654438332670436",
    title:"Gold International Reserves are SURGING", color:"c-green",
    timestamp:"2025-08-20T00:00:00.000Z" },
  { url:"https://x.com/KobeissiLetter/status/1959636646925852986",
    title:"US Federal Debt Surging At +$21 Billion Per Day", color:"c-green",
    timestamp:"2025-08-19T00:00:00.000Z" },
  { url:"https://www.visualcapitalist.com/growth-of-100-invested-in-jim-simons-medallion-fund/",
    title:"The Best Performing Fund in Modern History", color:"c-green",
    timestamp:"2025-08-23T00:00:00.000Z" },
  { url:"https://www.zerohedge.com/geopolitical/watch-israel-targets-yemens-capital-massive-strikes-near-presidential-complex-missile",
    title:"Israel Targets Yemen's Capital With Massive Strikes", color:"c-red",
    timestamp:"2025-08-22T00:00:00.000Z" },
  { url:"https://www.zerohedge.com/geopolitical/systemic-corruption-doesnt-give-chance-peace-ukraine",
    title:"Systemic Corruption Doesn't Give A Chance For Peace In Ukraine", color:"c-pink",
    timestamp:"2025-08-19T00:00:00.000Z" },
  { url:"https://thefederalist.com/2025/08/21/cracker-barrel-is-dead-and-its-stupid-woke-ceo-killed-it-with-gay-nonsense/",
    title:"Going Full Bud Light", color:"c-orange",
    timestamp:"2025-08-24T00:00:00.000Z" },
  { url:"https://www.washingtonexaminer.com/opinion/editorials/3777258/smithsonian-long-overdue-for-housecleaning/",
    title:"The Smithsonian Has Jumped the Shark", color:"c-indigo",
    timestamp:"2025-08-18T00:00:00.000Z" },
  { url:"https://youtu.be/HdllGyweF7c?si=qX95ftQDHqHYKE_j",
    title:"The Vegas Shooting Is A Layered Onion of \"Max Conspiracy\"", color:"c-blue",
    timestamp:"2025-08-17T00:00:00.000Z" },
  { url:"https://example.com",
    title:"Diddy's Arrest Is Part of Something Bigger", color:"c-orange",
    timestamp:"2025-08-22T00:00:00.000Z" },

  /* Column 3 (Fun/Sports/Misc) */
  { url:"https://www.instagram.com/reel/DLflv5zOUGA/?igsh=MTUwdDV0M3VobmFtYw%3D%3D",
    title:"This Teacher Loves His Students", color:"c-indigo",
    timestamp:"2025-08-18T00:00:00.000Z" },
  { url:"https://www.instagram.com/reel/C0XBYjXRPGY/?igsh=MWVxNG56cDF3a2Jzcg%3D%3D",
    title:"The \"Classic Part\" Little Boy Has the Right Attitude", color:"c-violet",
    timestamp:"2025-08-20T00:00:00.000Z" },
  { url:"https://x.com/engineers_feed/status/1959628877711487203",
    title:"Windows 95 Launch Party: Peak 90s ðŸ¤˜", color:"c-pink",
    timestamp:"2025-08-19T00:00:00.000Z" },
  { url:"https://www.espn.com/nfl/story/_/id/46039656/nfl-new-head-coaches-outlooks-predictions-2025",
    title:"Which New NFL Coaches Are in the Best Position to Win?", color:"c-orange",
    timestamp:"2025-08-17T00:00:00.000Z" },
  { url:"https://www.espn.com/nba/story/_/id/46061949/holy-grail-jordan-bryant-sports-card-sells-record-129m",
    title:"'Holy Grail' Jordanâ€“Bryant Card Sells for $12.9M", color:"c-indigo",
    timestamp:"2025-08-18T00:00:00.000Z" },
  { url:"https://www.zerohedge.com/markets/cost-attending-nfl-game-has-risen-40-last-10-years",
    title:"Cost of Attending an NFL Game +40% in 10 Years", color:"c-violet",
    timestamp:"2025-08-23T00:00:00.000Z" },
  { url:"https://www.youtube.com/watch?v=x9cVcGQNxBw",
    title:"They Found Giants In A Cave", color:"c-blue",
    timestamp:"2025-08-21T00:00:00.000Z" },
  { url:"https://www.youtube.com/shorts/0Phz6wnq_GU",
    title:"The Pyramid Power Plant Theory", color:"c-indigo",
    timestamp:"2025-08-18T00:00:00.000Z" }
];

/* -------------------- App constants & storage -------------------- */
const ACTIVE_KEY = 'dayluge_active_v1';
const ARCHIVE_KEY = 'dayluge_archive_v1';
const ACTIVE_MAX = 48;

const fmtTime = new Intl.DateTimeFormat(undefined,{hour:'2-digit',minute:'2-digit'});

function loadJSON(key){
  try{ const raw = localStorage.getItem(key); return raw ? JSON.parse(raw) : null; }
  catch(e){ return null; }
}
function saveJSON(key, val){ localStorage.setItem(key, JSON.stringify(val)); }

/* Initialize: if no active list yet, seed with your curated links (sorted newestâ†’oldest) */
function initData(){
  let active = loadJSON(ACTIVE_KEY);
  let archive = loadJSON(ARCHIVE_KEY);
  if (!Array.isArray(active)){
    active = [...SEED_ACTIVE].sort((a,b)=>new Date(b.timestamp)-new Date(a.timestamp));
    saveJSON(ACTIVE_KEY, active);
  }
  if (!Array.isArray(archive)){
    archive = [];
    saveJSON(ARCHIVE_KEY, archive);
  }
  return {active, archive};
}

/* -------------------- Render & interactions -------------------- */
let {active, archive} = initData();
let showingArchive = false;

const feedEl = document.getElementById('feed');
const countsEl = document.getElementById('counts');
const emptyMsg = document.getElementById('emptyMsg');

function render(){
  const list = showingArchive ? archive : active;
  feedEl.innerHTML = list.map(l => `
    <div class="link ${l.color || 'c-black'}">
      <a href="${l.url}" target="_blank" rel="noopener noreferrer">${l.title}</a>
    </div>
  `).join('');
  emptyMsg.style.display = list.length ? 'none' : 'block';

  countsEl.textContent = showingArchive
    ? \`Archive: \${archive.length} | Active: \${active.length}/\${ACTIVE_MAX}\`
    : \`Active: \${active.length}/\${ACTIVE_MAX} | Archive: \${archive.length}\`;

  document.getElementById('toggleBtn').textContent = showingArchive ? 'View Active' : 'View Archive';
}

/* Keep newest 48 in active; overflow (oldest) â†’ archive (newest-first there too) */
function enforceActiveCap(){
  if (active.length > ACTIVE_MAX){
    const moved = active.splice(ACTIVE_MAX);      // oldest slice
    moved.reverse().forEach(item => archive.unshift(item)); // keep archive newest-first
  }
}

/* Public add function (also wired to the Add button) */
function addLink(title, url, colorClass){
  const item = {
    title: title || '(untitled)',
    url: url || '#',
    color: colorClass || 'c-black',
    timestamp: new Date().toISOString()
  };
  active.unshift(item);     // newest first
  enforceActiveCap();
  saveJSON(ACTIVE_KEY, active);
  saveJSON(ARCHIVE_KEY, archive);
  showingArchive = false;
  render();
  window.scrollTo({top:0, behavior:'smooth'});
}

/* Expose for console use */
window.addLink = addLink;

/* UI wiring */
document.getElementById('addBtn').addEventListener('click', ()=>{
  const title = document.getElementById('titleInput').value.trim();
  const url   = document.getElementById('urlInput').value.trim();
  const color = document.getElementById('colorInput').value || 'c-black';
  if (!title || !url){ alert('Please enter Title and URL'); return; }
  addLink(title, url, color);
  document.getElementById('titleInput').value = '';
  document.getElementById('urlInput').value = '';
  document.getElementById('colorInput').value = 'c-black';
});

document.getElementById('toggleBtn').addEventListener('click', ()=>{
  showingArchive = !showingArchive;
  render();
});

document.getElementById('exportActiveBtn').addEventListener('click', ()=>{
  const blob = new Blob([JSON.stringify(active, null, 2)], {type:'application/json'});
  const url = URL.createObjectURL(blob);
  const a = document.createElement('a'); a.href = url; a.download = 'dayluge-active.json'; a.click();
  URL.revokeObjectURL(url);
});

document.getElementById('exportArchiveBtn').addEventListener('click', ()=>{
  const blob = new Blob([JSON.stringify(archive, null, 2)], {type:'application/json'});
  const url = URL.createObjectURL(blob);
  const a = document.createElement('a'); a.href = url; a.download = 'dayluge-archive.json'; a.click();
  URL.revokeObjectURL(url);
});

/* First paint */
render();
</script>
</body>
</html>
